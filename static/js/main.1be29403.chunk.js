(this.webpackJsonpdsv_importer=this.webpackJsonpdsv_importer||[]).push([[0],{100:function(e,t,a){e.exports=a(128)},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),o=a(15),i=a(172),u=a(174),m=a(175),s=a(76),p=a(194),d=a(42),f=a.n(d),b=Object(s.a)((function(e){return Object(p.a)({root:{flexGrow:1},appBar:{background:f.a[50]},title:{flexGrow:1,margin:e.spacing(3),color:f.a[900]}})})),h=function(){var e=b({});return r.a.createElement("div",{className:e.root},r.a.createElement(i.a,{elevation:0,position:"static",className:e.appBar},r.a.createElement(u.a,null,r.a.createElement(m.a,{variant:"h3",className:e.title,color:"inherit","aria-label":"menu"},"Upload your data"))))},v=a(190),E=a(195),g=a(176),O=a(192),j=function(e){var t=e.activeStep,a=e.steps,n=y({});return a=a.slice(0,3),r.a.createElement("div",{className:n.root},r.a.createElement(E.a,{className:n.stepper,activeStep:t},a.map((function(e,t){return r.a.createElement(g.a,{key:"".concat(e.label).concat(t)},r.a.createElement(O.a,null,e.label))}))))},y=Object(s.a)((function(e){return Object(p.a)({root:{width:"100%"},stepper:{backgroundColor:f.a[50]}})})),S=a(78),N=a.n(S),C=a(10),w=a(17),x=a(188),I=a(7),F=a(178),k=a(177),L=a(81),M=a(179),U=a(180),T=a(181),D=a(184),P=a(191),A=a(197),W=a(51),_=a.n(W),B={number:"Number",label:"Label",set:"Set","set-list":"Set List",categorical:"Categorical"},J={Number:"number",Label:"label",Set:"set","Set List":"set-list",Categorical:"categorical"};function H(e){return q(e)?function(e){var t=Object(C.a)(new Set(e));return t.length>0&&t.length<=2}(e)?"Set":z(e)?"Number":R(e)?"Categorical":"Number":R(e)?"Categorical":"Label"}function q(e){return!e.every(isNaN)}function z(e){return e.some((function(e){return e%1!==0}))}function R(e){var t=Object(C.a)(new Set(e));return t.length>0&&t.length<10}var G,Z=a(185),$=a(186),K=function(e){var t=e.data,a=e.handleColumnTypeChange,l=Math.random().toFixed(5),c=t.rows,i=t.columns,u=t.columnTypeMap,m=Object(n.useState)(u),s=Object(o.a)(m,2),p=s[0],d=s[1],f=c.length,b=c.map((function(e,t){return Object(w.a)({idx:t},e)}));return f>60&&(b=[].concat(Object(C.a)(b.slice(0,30)),[Object(I.a)({},l,l)],Object(C.a)(b.slice(f-30,f)))),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{component:L.a},r.a.createElement(F.a,{"aria-label":"simple table"},r.a.createElement(M.a,null,r.a.createElement(U.a,null,[""].concat(Object(C.a)(i)).map((function(e){return r.a.createElement(T.a,{key:e,align:"center"},e,e.length>0&&r.a.createElement(P.a,{value:J[p[e]],onChange:function(t){d(Object(w.a)({},p,Object(I.a)({},e,B[t.target.value])))}},r.a.createElement(A.a,{value:"number"},"Number"),r.a.createElement(A.a,{value:"label"},"Label"),r.a.createElement(A.a,{value:"set"},"Set"),r.a.createElement(A.a,{value:"set-list"},"Set List"),r.a.createElement(A.a,{value:"categorical"},"Categorical")))})))),r.a.createElement(D.a,null,b.map((function(e,t){return e[l]&&e[l]===l?r.a.createElement(U.a,{key:t},r.a.createElement(T.a,{colSpan:i.length-1},"...")):r.a.createElement(U.a,{key:t},["idx"].concat(Object(C.a)(i)).map((function(t){return r.a.createElement(T.a,{key:t,align:"center"},e[t])})))}))))),r.a.createElement(Z.a,{style:{padding:"0.75em"},container:!0,justify:"center",alignItems:"center"},r.a.createElement(Z.a,{container:!0,item:!0,xs:!0,justify:"center",alignItems:"center"}),r.a.createElement(Z.a,{container:!0,item:!0,xs:!0,justify:"center",alignItems:"center"}),r.a.createElement(Z.a,{container:!0,item:!0,xs:!0,justify:"center",alignItems:"center"},r.a.createElement($.a,{endIcon:r.a.createElement(_.a,null),variant:"contained",color:"primary",onClick:function(){a(p)}},"Next"))))},Q=a(182),V=a(187),X=a(198),Y=function(e){var t=e.setSeparator,a=e.selectedSeparator,l=e.handleFileUpload,c=ee({}),i=Object(n.useState)(null),u=Object(o.a)(i,2),m=u[0],s=u[1];return r.a.createElement(Z.a,{className:c.root,container:!0,justify:"center",alignItems:"center",spacing:3},r.a.createElement(Z.a,{item:!0},r.a.createElement(V.a,null,r.a.createElement(X.a,{htmlFor:"file-upload"}),r.a.createElement(Q.a,{id:"file-upload",type:"file",onChange:function(e){s(e.target.files[0])}}))),r.a.createElement(Z.a,{item:!0},r.a.createElement(V.a,null,r.a.createElement(X.a,null,"Separator"),r.a.createElement(P.a,{value:a,onChange:function(e){t(e.target.value)}},r.a.createElement(A.a,{value:"semicolon"},"Semicolon ;"),r.a.createElement(A.a,{value:"colon"},"Colon :"),r.a.createElement(A.a,{value:"tab"},"Tab \\t"),r.a.createElement(A.a,{value:"comma"},"Comma ,"),r.a.createElement(A.a,{value:"space"},"Space")))),r.a.createElement(Z.a,{item:!0},r.a.createElement(V.a,null,r.a.createElement($.a,{disabled:null===m,variant:"contained",color:"primary",onClick:function(){l(m)},endIcon:r.a.createElement(_.a,null)},"Next"))))},ee=Object(s.a)((function(e){return Object(p.a)({root:{height:"100%",width:"100%"}})}));!function(e){e.UPLOAD="UPLOAD",e.COLUMNS="COLUMNS",e.FINISH="FINISH"}(G||(G={}));var te=a(80);function ae(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var ne={semicolon:";",colon:":",space:" ",tab:"\t",comma:","};var re=a(199),le=function(e){var t=e.datasetInfo,a=e.handleFormSubmission,l=e.uploadComplete,c=Object(n.useState)(t),i=Object(o.a)(c,2),u=i[0],m=i[1],s=Object(n.useState)(!0),p=Object(o.a)(s,2),d=p[0],f=p[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),v=h[0],E=h[1],g=u.email;return Object(n.useEffect)((function(){d||E(!ae(g))}),[d,g]),r.a.createElement(Z.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement("form",{style:{display:"table"},onSubmit:function(e){if(e.preventDefault(),!ae(u.email))return E(!0),void f(!1);a(u)}},r.a.createElement(Z.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(Z.a,{style:{width:"75%"},container:!0,spacing:5},r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{username:e.target.value}))},value:u.username,required:!0,id:"name",name:"name",label:"Name",variant:"outlined",fullWidth:!0})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{email:e.target.value}))},required:!0,value:u.email,id:"email",name:"email",label:"Email",variant:"outlined",helperText:v?"Please enter a valid email id.":"",error:v,fullWidth:!0})),r.a.createElement(Z.a,{item:!0,xs:12,sm:4},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{name:e.target.value}))},required:!0,value:u.name,id:"dataset-name",name:"dataset-name",label:"Dataset Name",variant:"outlined",placeholder:"Name of the dataset",fullWidth:!0})),r.a.createElement(Z.a,{item:!0,xs:12,sm:4},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{author:e.target.value}))},value:u.author,id:"author",name:"author",label:"Author",variant:"outlined",placeholder:"Organizations/Persons",fullWidth:!0})),r.a.createElement(Z.a,{item:!0,xs:12,sm:4},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{source:e.target.value}))},value:u.source,id:"source",name:"source",label:"Source",variant:"outlined",placeholder:"URL/Name if applicable",fullWidth:!0})),r.a.createElement(Z.a,{item:!0,xs:12},r.a.createElement(re.a,{onChange:function(e){m(Object(w.a)({},u,{description:e.target.value}))},value:u.description,id:"description",name:"description",label:"Description",variant:"outlined",placeholder:"Please describe the dataset",multiline:!0,rows:"4",fullWidth:!0})),r.a.createElement(Z.a,{container:!0,item:!0,xs:12,justify:"center"},r.a.createElement($.a,{disabled:l,type:"submit",variant:"contained",color:"primary"},"Submit"))))))},ce=a(79),oe=a.n(ce),ie=a(196),ue=a(189),me=a(52),se=function(e){var t,a=e.step,l=pe({}),c=Object(n.useState)({rows:[],columns:[],columnTypeMap:{}}),i=Object(o.a)(c,2),u=i[0],m=i[1],s=Object(n.useState)(!1),p=Object(o.a)(s,2),d=p[0],f=p[1],b=Object(n.useState)(null),h=Object(o.a)(b,2),v=h[0],E=h[1],g=Object(n.useState)(""),O=Object(o.a)(g,2),j=O[0],y=O[1],S=Object(n.useState)({username:"",email:"",file:"",name:"",header:0,separator:";",skip:-1,meta:[],sets:[],author:"",description:"",source:""}),N=Object(o.a)(S,2),I=N[0],F=N[1],k=Object(n.useContext)(fe).goToNextStep;""===j||0!==u.rows.length&&0!==u.columns.length||m(function(e,t){var a=Object(te.a)(t).parse(e),n=Object(C.a)(a),r=a.columns,l={};return r.forEach((function(e){var t=n.map((function(t){return t[e]}));l[e]=H(t)})),{rows:n,columns:r,columnTypeMap:l}}(j,I.separator));var L;return t=a===G.UPLOAD?r.a.createElement(Y,{setSeparator:function(e){F(Object(w.a)({},I,{separator:ne[e]}))},selectedSeparator:(L=I.separator,(Object.keys(ne).map((function(e){return ne[e]})).find((function(e){return e===L}))||["semicolon",";"])[0]),handleFileUpload:function(e){if(e&&""===j&&a===G.UPLOAD){var t=new FileReader;t.onload=function(t){y(t.target.result),E(e),k()},t.readAsText(e)}}}):a===G.COLUMNS?r.a.createElement(K,{handleColumnTypeChange:function(e){var t=function(e,t,a){var n=t.columns.map((function(e,t){return a[e]===B.set?t:void 0})).filter((function(e){return void 0!==e})),r=t.columns.map((function(e,t){return a[e]!==B.set?t:void 0})).filter((function(e){return void 0!==e})),l=n.reduce((function(e,t,a,n){return void 0!==t&&(void 0!==n[a-1]&&n[a-1]+1===t||e.push([]),e[e.length-1].push(t)),e}),[]),c=[];l.forEach((function(e){c.push({format:"binary",start:e[0],end:e[e.length-1]})}));var o=[];return r.forEach((function(e){var n={type:"string",index:e,name:t.columns[e]};if(a[n.name]===B.label)return n.type="id",void o.push(n);var r=t.rows.map((function(e){return e[n.name]}));q(r)&&(z(r.map(parseFloat))?(n.type="float",n.min=Math.min.apply(Math,Object(C.a)(r.map(parseFloat))),n.max=Math.max.apply(Math,Object(C.a)(r.map(parseFloat)))):(n.type="integer",n.min=Math.min.apply(Math,Object(C.a)(r.map((function(e){return parseInt(e,10)})))),n.max=Math.max.apply(Math,Object(C.a)(r.map((function(e){return parseInt(e,10)})))))),o.push(n)})),JSON.parse(JSON.stringify(Object(w.a)({},e,{sets:c,meta:o})))}(I,u,e);F(Object(w.a)({},t)),k()},data:u}):r.a.createElement(le,{datasetInfo:I,uploadComplete:d,handleFormSubmission:function(e){var t=new FormData;t.append("data",v),t.append("metadata",JSON.stringify(e)),oe.a.post("".concat(de,"upload"),t).then((function(){f(!0),k()})).catch((function(e){console.error(e)}))}}),r.a.createElement(x.a,{className:l.root},t,r.a.createElement(ie.a,{open:d},r.a.createElement(ue.a,{style:{backgroundColor:me.a[600]},message:"File uploaded successfully!"})))},pe=Object(s.a)((function(e){return Object(p.a)({root:{height:"100%",width:"100%",overflow:"auto",padding:0,display:"grid",gridTemplateRows:"auto min-content"}})}));var de="http://us-central1-upset2-eaf80.cloudfunctions.net/api/",fe=Object(n.createContext)({goBackOneStep:function(){},goToNextStep:function(){}}),be=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],l=t[1],c=[{label:"Upload dataset",instructions:"Please upload the file with dataset. We support any delimiter separated file format (e.g. csv, tsv, etc.)",type:G.UPLOAD},{label:"Set Column Types",instructions:"Select the proper column types. Important ones are the columns which show set membership",type:G.COLUMNS},{label:"Finish",instructions:"Fill in the details, and click upload.",type:G.FINISH},{label:"Finish",instructions:"Fill in the details, and click upload.",type:G.FINISH}];return r.a.createElement("div",{className:N.a.layout_div},r.a.createElement(v.a,null),r.a.createElement(h,null),r.a.createElement(j,{activeStep:a,steps:c}),r.a.createElement(fe.Provider,{value:{goToNextStep:function(){return l(a+1)},goBackOneStep:function(){return l(a-1)}}},r.a.createElement(se,{step:c[a].type})))},he=(a(127),be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,a){e.exports={layout_div:"dsvimporter_layout_div__O_DOw"}}},[[100,1,2]]]);
//# sourceMappingURL=main.1be29403.chunk.js.map